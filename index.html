<!DOCTYPE html><html><head><title>Presentation</title><meta charset="utf-8"><link href="./static/normalize.css" rel="stylesheet" type="text/css"><link href="./static/base.css" rel="stylesheet" type="text/css"></head><body><article><section class="section" id="section-0"><section class="slide" id="slide-0-0" data-background="./assets/next-level-testing.svg">
<aside class="notes">
<p>Hi, my name is Sune, I&#39;m a software engineer at Zendesk here in
Copenhagen.
</aside></p>
<aside class="notes">
<p>I been working professionally as a developer for almost 10 years. If I had
to make an educated estimate on how much of my time was spend debugging,
fixing bugs and reworking broken stuff during those years, I would say
that it is well above 50 procent. That quite frankly makes me a little
mad, it is just an enormous waste of time.
</aside></p>
<aside class="notes">
<p>I think that a lot of that wasted time could have been avoided by writing more
and better tests.
</aside></p>
</section></section><section class="section" id="section-1"><section class="slide" id="slide-1-0">
<h2 id="make-testing-suck-less">Make testing suck less</h2>
<aside class="notes">
<p>But I have a feeling that a lot of people don&#39;t really like writing tests.
They don&#39;t see tests as a tool that will help them improving their performance.
So they only write tests out of necessity.
</aside></p>
<aside class="notes">
<p>I don&#39;t blame them, there are a lot of reasons why writing tests can be
tedious work.
</aside></p>
<aside class="notes">
<p>So here is some advice on how to make testing suck less.
</aside></p>
<p><img src="./assets/suckless.jpg"></p>
</section><section class="slide" id="slide-1-1">
<h3 id="write-your-tests-upfront">Write your tests upfront</h3>
<aside class="notes">
<p>the first thing I&#39;ll recommend is to write your tests upfront.
</aside></p>
<aside class="notes">
<p>it is much harder to test existing code than it is to write the tests
while you are implementing your production code.
</aside></p>
<aside class="notes">
<p>I know that it takes a lot of discipline, but every time I manage to do it
myself, I&#39;m rewarded for my effort.
</aside></p>
<aside class="notes">
<p>You may feel the you can go faster without any tests or by implementing
them later, but trust me, that won&#39;t hold up in the long run. It is much better
to move a bit slower but always moving forward, instead of having to go back and
fix stuff all the time.
</aside></p>
<p><img src="./assets/upfront.jpg"></p>
</section><section class="slide" id="slide-1-2">
<h3 id="make-your-tests-fast">Make your tests fast</h3>
<aside class="notes">
<p>another thing that is really important, is to have a fast feedback
loop.
</aside></p>
<aside class="notes">
<p>nobody likes waiting unless they are out of coffee.
</aside></p>
<ul>
<li>Isolate your tests from IO as much as possible.</li>
<li>Only run the tests your are working on.</li>
</ul>
</section><section class="slide" id="slide-1-3">
<h3 id="stop-testing-internals">Stop testing internals</h3>
<p><img src="./assets/blackbox.jpg"></p>
<aside class="notes">
<p>people often complain that small changes breaks a lot of existing tests.
</aside></p>
<aside class="notes">
<p>a way of avoiding that, is to only tests on the API surface. The API for
each module is hopefully pretty stable.
</aside></p>
<aside class="notes">
<p>This basically means, don&#39;t test helper methods or internal state. If you
feel the need to test a helper methods, just make it into a new module.
</aside></p>
<aside class="notes">
<p>If you can&#39;t reach some code from your tests, it must be dead, so then
just delete it.
</aside></p>
</section><section class="slide" id="slide-1-4">
<h3 id="make-your-tests-communicate-your-intention">Make your tests communicate your intention</h3>
<p><img src="./assets/debugging.png" style="border: none"></p>
<aside class="notes">
<p>In my opinion tests should be seen as a medium of communication between
developers and not just simple validity checks of a program.
</aside></p>
<aside class="notes">
<p>when you open a test it should be as clear as possible what the intention
of the test is; otherwise you will force your team members to decipher the code
or turn to debugging when it fails.
</aside></p>
</section><section class="slide" id="slide-1-5">
<div class="code lang-javascript"><div><span style="color: #000000">describe</span><span style="color: #000000">(</span><span style="color: #df5000">'resize'</span><span style="color: #000000">,</span>&nbsp;<span style="color: #000000">()</span>&nbsp;<span style="color: #a71d5d">=&gt;</span>&nbsp;<span style="color: #000000">{</span></div><div>&nbsp;&nbsp;<span style="color: #000000">describe</span><span style="color: #000000">(</span><span style="color: #df5000">'when&nbsp;only&nbsp;given&nbsp;a&nbsp;width'</span><span style="color: #000000">,</span>&nbsp;<span style="color: #000000">()</span>&nbsp;<span style="color: #a71d5d">=&gt;</span>&nbsp;<span style="color: #000000">{</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;it&nbsp;<span style="color: #000000">(</span><span style="color: #df5000">'resizes&nbsp;images&nbsp;proportionally'</span><span style="color: #000000">)</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #a71d5d">return</span>&nbsp;<span style="color: #000000">expect</span><span style="color: #000000">(</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #df5000">'./2048x1324.jpg'</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #df5000">'when&nbsp;scaled&nbsp;to'</span><span style="color: #000000">,</span>&nbsp;<span style="color: #000000">{</span>&nbsp;width<span style="color: #000000">:</span>&nbsp;<span style="color: #0086b3">1024</span>&nbsp;<span style="color: #000000">},</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #df5000">'to&nbsp;have&nbsp;metadata&nbsp;satisfying'</span><span style="color: #000000">,</span>&nbsp;<span style="color: #000000">{</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;format<span style="color: #000000">:</span>&nbsp;<span style="color: #df5000">'JPEG'</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;size<span style="color: #000000">:</span>&nbsp;<span style="color: #000000">{</span>&nbsp;width<span style="color: #000000">:</span>&nbsp;<span style="color: #0086b3">1024</span><span style="color: #000000">,</span>&nbsp;height<span style="color: #000000">:</span>&nbsp;<span style="color: #0086b3">662</span>&nbsp;<span style="color: #000000">}</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #000000">}</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #000000">})</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #000000">})</span></div><div>&nbsp;&nbsp;<span style="color: #000000">})</span></div><div><span style="color: #000000">})</span></div></div><aside class="notes">
<p>what you see here is a test written with Unexpected - an assertion library
that I&#39;m the author of.
</aside></p>
<aside class="notes">
<p>we are testing that a resize function given only a width, should scale the image
proportionally to that width.
</aside></p>
</section><section class="slide" id="slide-1-6">
<h3 id="choose-a-tool-that-gives-you-great-feedback">Choose a tool that gives you great feedback</h3>
<aside class="notes">
<p>in addition to making your test as readable as possible, the error output
should also describe exactly what the problem is when the test fails.
</aside></p>
</section><section class="slide" id="slide-1-7">
<div class="code lang-javascript"><div><span style="color: #000000">expect</span><span style="color: #000000">([</span><span style="color: #0086b3">0</span><span style="color: #000000">,</span>&nbsp;<span style="color: #0086b3">1</span><span style="color: #000000">,</span>&nbsp;<span style="color: #0086b3">2</span><span style="color: #000000">,</span>&nbsp;<span style="color: #0086b3">4</span><span style="color: #000000">,</span>&nbsp;<span style="color: #0086b3">5</span><span style="color: #000000">],</span>&nbsp;<span style="color: #df5000">'to&nbsp;equal'</span><span style="color: #000000">,</span>&nbsp;<span style="color: #000000">[</span><span style="color: #0086b3">1</span><span style="color: #000000">,</span>&nbsp;<span style="color: #0086b3">2</span><span style="color: #000000">,</span>&nbsp;<span style="color: #0086b3">3</span><span style="color: #000000">,</span>&nbsp;<span style="color: #0086b3">4</span><span style="color: #000000">])</span></div></div><div class="output"><div><span style="color: red; font-weight: bold">expected</span>&nbsp;[&nbsp;<span style="color: #0086b3">0</span>,&nbsp;<span style="color: #0086b3">1</span>,&nbsp;<span style="color: #0086b3">2</span>,&nbsp;<span style="color: #0086b3">4</span>,&nbsp;<span style="color: #0086b3">5</span>&nbsp;]&nbsp;<span style="color: red; font-weight: bold">to&nbsp;equal</span>&nbsp;[&nbsp;<span style="color: #0086b3">1</span>,&nbsp;<span style="color: #0086b3">2</span>,&nbsp;<span style="color: #0086b3">3</span>,&nbsp;<span style="color: #0086b3">4</span>&nbsp;]</div><div>&nbsp;</div><div>[</div><div>&nbsp;&nbsp;<div style="display: inline-block; vertical-align: top"><div><div style="display: inline-block; vertical-align: top"><div><div style="display: inline-block; vertical-align: top"><div><span style="color: #0086b3">0</span>,&nbsp;<span style="color: red; font-weight: bold">//&nbsp;should&nbsp;be&nbsp;removed</span></div></div></div></div></div><div><div style="display: inline-block; vertical-align: top"><div><div style="display: inline-block; vertical-align: top"><div><span style="color: #0086b3">1</span>,</div></div></div></div></div><div><div style="display: inline-block; vertical-align: top"><div><div style="display: inline-block; vertical-align: top"><div><span style="color: #0086b3">2</span>,</div></div></div></div></div><div><div style="display: inline-block; vertical-align: top"><div><div style="display: inline-block; vertical-align: top"><div><span style="color: red; font-weight: bold">//</span></div></div>&nbsp;<div style="display: inline-block; vertical-align: top"><div><span style="color: red; font-weight: bold">missing&nbsp;</span><div style="display: inline-block; vertical-align: top"><div><span style="color: #0086b3">3</span></div></div></div></div></div></div></div><div><div style="display: inline-block; vertical-align: top"><div><div style="display: inline-block; vertical-align: top"><div><span style="color: #0086b3">4</span>,</div></div></div></div></div><div><div style="display: inline-block; vertical-align: top"><div><div style="display: inline-block; vertical-align: top"><div><span style="color: #0086b3">5</span>&nbsp;<span style="color: red; font-weight: bold">//&nbsp;should&nbsp;be&nbsp;removed</span></div></div></div></div></div></div></div><div>]</div></div><aside class="notes">
<p>here we are comparing two arrays for equality.
</aside></p>
<aside class="notes">
<p>Notice how the expectation is repeated in the error message, so we have
the full context of the error.
</aside></p>
<aside class="notes">
<p>The diff states exactly what is wrong and makes use of colors to make it
very clear.
</aside></p>
</section><section class="slide" id="slide-1-8">
<h3 id="stop-testing-at-the-wrong-level-of-abstraction">Stop testing at the wrong level of abstraction</h3>
<aside class="notes">
<p>I have looked at a lot of different test suites - open source as well as
closed - and what I seen, is that most of them test at the lowest level of
abstraction.
</aside></p>
<p><img src="./assets/binary-keyboard.jpg"></p>
<aside class="notes">
<p>what do I mean by lowest level of abstraction?
</aside></p>
</section><section class="slide" id="slide-1-9">
<aside class="notes">
<p>here we are testing that the string <code>AT THE FRONTEND</code> contains the
substring <code>FRONTEND</code>.
</aside></p>
<div class="code lang-javascript"><div>const&nbsp;atf&nbsp;<span style="color: #a71d5d">=</span>&nbsp;<span style="color: #df5000">'AT&nbsp;THE&nbsp;FRONTEND'</span></div><div><span style="color: #000000">expect</span><span style="color: #000000">(</span>atf<span style="color: #000000">.</span><span style="color: #000000">indexOf</span><span style="color: #000000">(</span><span style="color: #df5000">'FRONTEND'</span><span style="color: #000000">)</span>&nbsp;<span style="color: #a71d5d">!==</span>&nbsp;<span style="color: #a71d5d">-</span><span style="color: #0086b3">1</span><span style="color: #000000">,</span>&nbsp;<span style="color: #df5000">'to&nbsp;be&nbsp;true'</span><span style="color: #000000">)</span></div></div><p>instead of </p>
<div class="code lang-javascript"><div><span style="color: #000000">expect</span><span style="color: #000000">(</span>atf<span style="color: #000000">,</span>&nbsp;<span style="color: #df5000">'to&nbsp;contain'</span><span style="color: #000000">,</span>&nbsp;<span style="color: #df5000">'FRONTEND'</span><span style="color: #000000">)</span></div></div><aside class="notes">
<p>one way we can test that, is to assert that the index of <code>FRONTEND</code> in the
string is not <code>-1</code>
</aside></p>
<aside class="notes">
<p>but we can state that much more clearly by using a tailor-made assertion.
</aside></p>
</section></section><section class="section" id="section-2"><section class="slide" id="slide-2-0">
<h2 id="take-it-to-the-next-level">Take it to the next level</h2>
<p><img src="./assets/next-level-car.jpg" style="height: 500px"></p>
<aside class="notes">
<p>in this section I&#39;ll show how advancing your testing to a higher
abstraction level, will make your tests more readable and at the same time
provide better output when they fails.
</aside></p>
</section><section class="slide" id="slide-2-1">
<aside class="notes">
<p>I&#39;ll be uses the game tic tac toe as the subject under test as it is
something most people can relate to.
</aside></p>
<h3 id="tic-tac-toe">Tic Tac Toe</h3>
<div class="code lang-javascript"><div>import&nbsp;Game&nbsp;from&nbsp;<span style="color: #df5000">'tic-tac-toe-js/lib/game'</span></div><div>&nbsp;</div><div>const&nbsp;game&nbsp;<span style="color: #a71d5d">=</span>&nbsp;<span style="color: #a71d5d">new</span>&nbsp;Game<span style="color: #000000">()</span></div><div>&nbsp;</div><div>game<span style="color: #000000">.</span><span style="color: #000000">move</span><span style="color: #000000">(</span><span style="color: #df5000">'O'</span><span style="color: #000000">,</span>&nbsp;<span style="color: #0086b3">9</span><span style="color: #000000">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #969896">&nbsp;//&nbsp;X&nbsp;|&nbsp;O&nbsp;|</span></div><div>game<span style="color: #000000">.</span><span style="color: #000000">move</span><span style="color: #000000">(</span><span style="color: #df5000">'X'</span><span style="color: #000000">,</span>&nbsp;<span style="color: #0086b3">6</span><span style="color: #000000">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #969896">&nbsp;//&nbsp;--+---+--</span></div><div>game<span style="color: #000000">.</span><span style="color: #000000">move</span><span style="color: #000000">(</span><span style="color: #df5000">'O'</span><span style="color: #000000">,</span>&nbsp;<span style="color: #0086b3">8</span><span style="color: #000000">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #969896">&nbsp;//&nbsp;&nbsp;&nbsp;|&nbsp;O&nbsp;|&nbsp;X</span></div><div>game<span style="color: #000000">.</span><span style="color: #000000">move</span><span style="color: #000000">(</span><span style="color: #df5000">'X'</span><span style="color: #000000">,</span>&nbsp;<span style="color: #0086b3">7</span><span style="color: #000000">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #969896">&nbsp;//&nbsp;--+---+--</span></div><div>game<span style="color: #000000">.</span><span style="color: #000000">move</span><span style="color: #000000">(</span><span style="color: #df5000">'O'</span><span style="color: #000000">,</span>&nbsp;<span style="color: #0086b3">5</span><span style="color: #000000">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #969896">&nbsp;//&nbsp;X&nbsp;|&nbsp;O&nbsp;|&nbsp;O</span></div><div>game<span style="color: #000000">.</span><span style="color: #000000">move</span><span style="color: #000000">(</span><span style="color: #df5000">'X'</span><span style="color: #000000">,</span>&nbsp;<span style="color: #0086b3">1</span><span style="color: #000000">)</span></div><div>game<span style="color: #000000">.</span><span style="color: #000000">move</span><span style="color: #000000">(</span><span style="color: #df5000">'O'</span><span style="color: #000000">,</span>&nbsp;<span style="color: #0086b3">2</span><span style="color: #000000">)</span></div></div><aside class="notes">
<p>I just picked a random tic tac toe library from NPM.
</aside></p>
<aside class="notes">
<p>In this example I create a new game and let each player make their moves.
</aside></p>
<aside class="notes">
<p>You see the end-result on the right.
</aside></p>
</section><section class="slide" id="slide-2-2">
<aside class="notes">
<p>Let&#39;s try to tests the game state at this point.
</aside></p>
<aside class="notes">
<p>One approach would be to assert that a huge boolean expression is true.
</aside></p>
<div class="code lang-javascript"><div><span style="color: #000000">expect</span><span style="color: #000000">(</span></div><div>&nbsp;&nbsp;game<span style="color: #000000">.</span><span style="color: #000000">at</span><span style="color: #000000">(</span><span style="color: #0086b3">0</span><span style="color: #000000">)</span>&nbsp;<span style="color: #a71d5d">===</span>&nbsp;<span style="color: #df5000">'X'</span>&nbsp;&amp;&amp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #969896">&nbsp;//&nbsp;X&nbsp;|&nbsp;O&nbsp;|</span></div><div>&nbsp;&nbsp;game<span style="color: #000000">.</span><span style="color: #000000">at</span><span style="color: #000000">(</span><span style="color: #0086b3">1</span><span style="color: #000000">)</span>&nbsp;<span style="color: #a71d5d">===</span>&nbsp;<span style="color: #df5000">'O'</span>&nbsp;&amp;&amp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #969896">&nbsp;//&nbsp;--+---+--</span></div><div>&nbsp;&nbsp;game<span style="color: #000000">.</span><span style="color: #000000">at</span><span style="color: #000000">(</span><span style="color: #0086b3">2</span><span style="color: #000000">)</span>&nbsp;<span style="color: #a71d5d">===</span>&nbsp;<span style="color: #a71d5d">null</span>&nbsp;&amp;&amp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #969896">&nbsp;//&nbsp;&nbsp;&nbsp;|&nbsp;O&nbsp;|&nbsp;X</span></div><div>&nbsp;&nbsp;game<span style="color: #000000">.</span><span style="color: #000000">at</span><span style="color: #000000">(</span><span style="color: #0086b3">3</span><span style="color: #000000">)</span>&nbsp;<span style="color: #a71d5d">===</span>&nbsp;<span style="color: #a71d5d">null</span>&nbsp;&amp;&amp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #969896">&nbsp;//&nbsp;--+---+--</span></div><div>&nbsp;&nbsp;game<span style="color: #000000">.</span><span style="color: #000000">at</span><span style="color: #000000">(</span><span style="color: #0086b3">4</span><span style="color: #000000">)</span>&nbsp;<span style="color: #a71d5d">===</span>&nbsp;<span style="color: #df5000">'O'</span>&nbsp;&amp;&amp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #969896">&nbsp;//&nbsp;X&nbsp;|&nbsp;O&nbsp;|&nbsp;O</span></div><div>&nbsp;&nbsp;game<span style="color: #000000">.</span><span style="color: #000000">at</span><span style="color: #000000">(</span><span style="color: #0086b3">5</span><span style="color: #000000">)</span>&nbsp;<span style="color: #a71d5d">===</span>&nbsp;<span style="color: #df5000">'X'</span>&nbsp;&amp;&amp;</div><div>&nbsp;&nbsp;game<span style="color: #000000">.</span><span style="color: #000000">at</span><span style="color: #000000">(</span><span style="color: #0086b3">6</span><span style="color: #000000">)</span>&nbsp;<span style="color: #a71d5d">===</span>&nbsp;<span style="color: #df5000">'X'</span>&nbsp;&amp;&amp;</div><div>&nbsp;&nbsp;game<span style="color: #000000">.</span><span style="color: #000000">at</span><span style="color: #000000">(</span><span style="color: #0086b3">7</span><span style="color: #000000">)</span>&nbsp;<span style="color: #a71d5d">===</span>&nbsp;<span style="color: #df5000">'O'</span>&nbsp;&amp;&amp;</div><div>&nbsp;&nbsp;game<span style="color: #000000">.</span><span style="color: #000000">at</span><span style="color: #000000">(</span><span style="color: #0086b3">8</span><span style="color: #000000">)</span>&nbsp;<span style="color: #a71d5d">===</span>&nbsp;<span style="color: #df5000">'O'</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;<span style="color: #df5000">'to&nbsp;be&nbsp;true'</span></div><div><span style="color: #000000">)</span></div></div><aside class="notes">
<p>I&#39;m just retrieving each position on the board and asserting whether it
should contain an X or an O or nothing.
</aside></p>
<aside class="notes">
<p>this is probably the lowest possible level of abstraction we can come up
with.
</aside></p>
</section><section class="slide" id="slide-2-3">
<aside class="notes">
<p>But that fails - can you figure out what the problem is?
</aside></p>
<div class="output"><div><span style="color: red; font-weight: bold">expected</span>&nbsp;<span style="color: #0086b3">false</span>&nbsp;<span style="color: red; font-weight: bold">to&nbsp;be&nbsp;true</span></div></div></section><section class="slide" id="slide-2-4">
<aside class="notes">
<p>let&#39;s try to advance it a bit by asserting on the individual positions of
the board:
</aside></p>
<div class="code lang-javascript"><div><span style="color: #000000">expect</span><span style="color: #000000">(</span>game<span style="color: #000000">.</span><span style="color: #000000">at</span><span style="color: #000000">(</span><span style="color: #0086b3">0</span><span style="color: #000000">),</span>&nbsp;<span style="color: #df5000">'to&nbsp;be'</span><span style="color: #000000">,</span>&nbsp;<span style="color: #df5000">'X'</span><span style="color: #000000">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #969896">&nbsp;//&nbsp;X&nbsp;|&nbsp;O&nbsp;|</span></div><div><span style="color: #000000">expect</span><span style="color: #000000">(</span>game<span style="color: #000000">.</span><span style="color: #000000">at</span><span style="color: #000000">(</span><span style="color: #0086b3">1</span><span style="color: #000000">),</span>&nbsp;<span style="color: #df5000">'to&nbsp;be'</span><span style="color: #000000">,</span>&nbsp;<span style="color: #df5000">'O'</span><span style="color: #000000">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #969896">&nbsp;//&nbsp;--+---+--</span></div><div><span style="color: #000000">expect</span><span style="color: #000000">(</span>game<span style="color: #000000">.</span><span style="color: #000000">at</span><span style="color: #000000">(</span><span style="color: #0086b3">2</span><span style="color: #000000">),</span>&nbsp;<span style="color: #df5000">'to&nbsp;be&nbsp;null'</span><span style="color: #000000">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #969896">&nbsp;//&nbsp;&nbsp;&nbsp;|&nbsp;O&nbsp;|&nbsp;X</span></div><div><span style="color: #000000">expect</span><span style="color: #000000">(</span>game<span style="color: #000000">.</span><span style="color: #000000">at</span><span style="color: #000000">(</span><span style="color: #0086b3">3</span><span style="color: #000000">),</span>&nbsp;<span style="color: #df5000">'to&nbsp;be&nbsp;null'</span><span style="color: #000000">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #969896">&nbsp;//&nbsp;--+---+--</span></div><div><span style="color: #000000">expect</span><span style="color: #000000">(</span>game<span style="color: #000000">.</span><span style="color: #000000">at</span><span style="color: #000000">(</span><span style="color: #0086b3">4</span><span style="color: #000000">),</span>&nbsp;<span style="color: #df5000">'to&nbsp;be'</span><span style="color: #000000">,</span>&nbsp;<span style="color: #df5000">'O'</span><span style="color: #000000">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #969896">&nbsp;//&nbsp;X&nbsp;|&nbsp;O&nbsp;|&nbsp;O</span></div><div><span style="color: #000000">expect</span><span style="color: #000000">(</span>game<span style="color: #000000">.</span><span style="color: #000000">at</span><span style="color: #000000">(</span><span style="color: #0086b3">5</span><span style="color: #000000">),</span>&nbsp;<span style="color: #df5000">'to&nbsp;be'</span><span style="color: #000000">,</span>&nbsp;<span style="color: #df5000">'X'</span><span style="color: #000000">)</span></div><div><span style="color: #000000">expect</span><span style="color: #000000">(</span>game<span style="color: #000000">.</span><span style="color: #000000">at</span><span style="color: #000000">(</span><span style="color: #0086b3">6</span><span style="color: #000000">),</span>&nbsp;<span style="color: #df5000">'to&nbsp;be'</span><span style="color: #000000">,</span>&nbsp;<span style="color: #df5000">'X'</span><span style="color: #000000">)</span></div><div><span style="color: #000000">expect</span><span style="color: #000000">(</span>game<span style="color: #000000">.</span><span style="color: #000000">at</span><span style="color: #000000">(</span><span style="color: #0086b3">7</span><span style="color: #000000">),</span>&nbsp;<span style="color: #df5000">'to&nbsp;be'</span><span style="color: #000000">,</span>&nbsp;<span style="color: #df5000">'O'</span><span style="color: #000000">)</span></div><div><span style="color: #000000">expect</span><span style="color: #000000">(</span>game<span style="color: #000000">.</span><span style="color: #000000">at</span><span style="color: #000000">(</span><span style="color: #0086b3">8</span><span style="color: #000000">),</span>&nbsp;<span style="color: #df5000">'to&nbsp;be'</span><span style="color: #000000">,</span>&nbsp;<span style="color: #df5000">'O'</span><span style="color: #000000">)</span></div></div><aside class="notes">
<p>let&#39;s see what happens when this fails.
</aside></p>
</section><section class="slide" id="slide-2-5">
<aside class="notes">
<p>that didn&#39;t help us much. But it gave us a little bit more information.
</aside></p>
<div class="output"><div><span style="color: red; font-weight: bold">expected</span>&nbsp;<span style="color: #0086b3">null</span>&nbsp;<span style="color: red; font-weight: bold">to&nbsp;be</span>&nbsp;<span style="color: #df5000">'X'</span></div></div></section><section class="slide" id="slide-2-6">
<aside class="notes">
<p>let&#39;s try to assert the entire game state at once.
</aside></p>
<div class="code lang-javascript"><div><span style="color: #000000">expect</span><span style="color: #000000">([</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #969896">&nbsp;//&nbsp;X&nbsp;|&nbsp;O&nbsp;|</span></div><div>&nbsp;&nbsp;game<span style="color: #000000">.</span><span style="color: #000000">at</span><span style="color: #000000">(</span><span style="color: #0086b3">0</span><span style="color: #000000">),</span>&nbsp;game<span style="color: #000000">.</span><span style="color: #000000">at</span><span style="color: #000000">(</span><span style="color: #0086b3">1</span><span style="color: #000000">),</span>&nbsp;game<span style="color: #000000">.</span><span style="color: #000000">at</span><span style="color: #000000">(</span><span style="color: #0086b3">2</span><span style="color: #000000">),</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #969896">&nbsp;//&nbsp;--+---+--</span></div><div>&nbsp;&nbsp;game<span style="color: #000000">.</span><span style="color: #000000">at</span><span style="color: #000000">(</span><span style="color: #0086b3">3</span><span style="color: #000000">),</span>&nbsp;game<span style="color: #000000">.</span><span style="color: #000000">at</span><span style="color: #000000">(</span><span style="color: #0086b3">4</span><span style="color: #000000">),</span>&nbsp;game<span style="color: #000000">.</span><span style="color: #000000">at</span><span style="color: #000000">(</span><span style="color: #0086b3">5</span><span style="color: #000000">),</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #969896">&nbsp;//&nbsp;&nbsp;&nbsp;|&nbsp;O&nbsp;|&nbsp;X</span></div><div>&nbsp;&nbsp;game<span style="color: #000000">.</span><span style="color: #000000">at</span><span style="color: #000000">(</span><span style="color: #0086b3">6</span><span style="color: #000000">),</span>&nbsp;game<span style="color: #000000">.</span><span style="color: #000000">at</span><span style="color: #000000">(</span><span style="color: #0086b3">7</span><span style="color: #000000">),</span>&nbsp;game<span style="color: #000000">.</span><span style="color: #000000">at</span><span style="color: #000000">(</span><span style="color: #0086b3">8</span><span style="color: #000000">)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #969896">&nbsp;//&nbsp;--+---+--</span></div><div><span style="color: #000000">],</span>&nbsp;<span style="color: #df5000">'to&nbsp;equal'</span><span style="color: #000000">,</span>&nbsp;<span style="color: #000000">[</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #969896">&nbsp;//&nbsp;X&nbsp;|&nbsp;O&nbsp;|&nbsp;O</span></div><div>&nbsp;&nbsp;<span style="color: #df5000">'X'</span><span style="color: #000000">,</span>&nbsp;&nbsp;<span style="color: #df5000">'O'</span><span style="color: #000000">,</span>&nbsp;<span style="color: #a71d5d">null</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;<span style="color: #a71d5d">null</span><span style="color: #000000">,</span>&nbsp;<span style="color: #df5000">'O'</span><span style="color: #000000">,</span>&nbsp;<span style="color: #df5000">'X'</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;<span style="color: #df5000">'X'</span><span style="color: #000000">,</span>&nbsp;&nbsp;<span style="color: #df5000">'O'</span><span style="color: #000000">,</span>&nbsp;<span style="color: #df5000">'O'</span></div><div><span style="color: #000000">])</span></div></div><aside class="notes">
<p>here I&#39;m extracting all the positions of the board into a array and
express my expected board the same way.
</aside></p>
</section><section class="slide" id="slide-2-7">
<div class="output"><div><span style="color: red; font-weight: bold">expected</span>&nbsp;[&nbsp;<span style="color: #0086b3">null</span>,&nbsp;<span style="color: #df5000">'X'</span>,&nbsp;<span style="color: #df5000">'O'</span>,&nbsp;<span style="color: #0086b3">null</span>,&nbsp;<span style="color: #0086b3">null</span>,&nbsp;<span style="color: #df5000">'O'</span>,&nbsp;<span style="color: #df5000">'X'</span>,&nbsp;<span style="color: #df5000">'X'</span>,&nbsp;<span style="color: #df5000">'O'</span>&nbsp;]</div><div><span style="color: red; font-weight: bold">to&nbsp;equal</span>&nbsp;[&nbsp;<span style="color: #df5000">'X'</span>,&nbsp;<span style="color: #df5000">'O'</span>,&nbsp;<span style="color: #0086b3">null</span>,&nbsp;<span style="color: #0086b3">null</span>,&nbsp;<span style="color: #df5000">'O'</span>,&nbsp;<span style="color: #df5000">'X'</span>,&nbsp;<span style="color: #df5000">'X'</span>,&nbsp;<span style="color: #df5000">'O'</span>,&nbsp;<span style="color: #df5000">'O'</span>&nbsp;]</div><div>&nbsp;</div><div>[</div><div><div style="display: inline-block; vertical-align: top"><div>┌───▷</div><div>│&nbsp;┌─▷</div><div>│&nbsp;│</div><div>└─│──</div><div>&nbsp;&nbsp;└──</div></div><div style="display: inline-block; vertical-align: top"><div>&nbsp;</div><div>&nbsp;</div><div>&nbsp;<div style="display: inline-block; vertical-align: top"><div><div style="display: inline-block; vertical-align: top"><div><span style="color: #0086b3">null</span>,</div></div></div></div></div><div>&nbsp;<div style="display: inline-block; vertical-align: top"><div><span style="color: #df5000">'X'</span>,&nbsp;<span style="color: red; font-weight: bold">//&nbsp;should&nbsp;be&nbsp;moved</span></div></div></div><div>&nbsp;<div style="display: inline-block; vertical-align: top"><div><span style="color: #df5000">'O'</span>,&nbsp;<span style="color: red; font-weight: bold">//&nbsp;should&nbsp;be&nbsp;moved</span></div></div></div><div>&nbsp;<div style="display: inline-block; vertical-align: top"><div><div style="display: inline-block; vertical-align: top"><div><span style="color: #0086b3">null</span>,</div></div></div></div></div><div>&nbsp;<div style="display: inline-block; vertical-align: top"><div><div style="display: inline-block; vertical-align: top"><div><span style="color: #0086b3">null</span>,&nbsp;<span style="color: red; font-weight: bold">//&nbsp;should&nbsp;be&nbsp;removed</span></div></div></div></div></div><div>&nbsp;<div style="display: inline-block; vertical-align: top"><div><div style="display: inline-block; vertical-align: top"><div><span style="color: #df5000">'O'</span>,</div></div></div></div></div><div>&nbsp;<div style="display: inline-block; vertical-align: top"><div><div style="display: inline-block; vertical-align: top"><div><span style="color: #df5000">'X'</span>,</div></div></div></div></div><div>&nbsp;<div style="display: inline-block; vertical-align: top"><div><div style="display: inline-block; vertical-align: top"><div><span style="color: #df5000">'X'</span>,</div></div></div></div></div><div>&nbsp;<div style="display: inline-block; vertical-align: top"><div><div style="display: inline-block; vertical-align: top"><div><span style="color: #df5000">'O'</span></div></div></div></div></div><div>&nbsp;<div style="display: inline-block; vertical-align: top"><div><div style="display: inline-block; vertical-align: top"><div><span style="color: red; font-weight: bold">//</span></div></div>&nbsp;<div style="display: inline-block; vertical-align: top"><div><span style="color: red; font-weight: bold">missing&nbsp;</span><div style="display: inline-block; vertical-align: top"><div><span style="color: #df5000">'O'</span></div></div></div></div></div></div></div></div></div><div>]</div></div><aside class="notes">
<p>okay that was a lot of output, but now it is actually possible to spot
what is wrong. As you can see all the indexes are shifted by one. That is
because the library indexes the positions on the board starting from one not
zero.
</aside></p>
<aside class="notes">
<p>the output can obviously still be improved a lot.
</aside></p>
</section><section class="slide" id="slide-2-8">
<div class="code lang-javascript"><div><span style="color: #000000">expect</span><span style="color: #000000">(</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #969896">&nbsp;//&nbsp;X&nbsp;|&nbsp;O&nbsp;|</span></div><div>&nbsp;&nbsp;game<span style="color: #000000">.</span><span style="color: #000000">toString</span><span style="color: #000000">(),</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #969896">&nbsp;//&nbsp;--+---+--</span></div><div>&nbsp;&nbsp;<span style="color: #df5000">'to&nbsp;equal'</span><span style="color: #000000">,</span>&nbsp;<span style="color: #000000">[</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #969896">&nbsp;//&nbsp;&nbsp;&nbsp;|&nbsp;O&nbsp;|&nbsp;X</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #df5000">'X&nbsp;|&nbsp;O&nbsp;|&nbsp;&nbsp;'</span><span style="color: #000000">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #969896">&nbsp;//&nbsp;--+---+--</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #df5000">'--+---+--'</span><span style="color: #000000">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #969896">&nbsp;//&nbsp;X&nbsp;|&nbsp;O&nbsp;|&nbsp;O</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #df5000">'&nbsp;&nbsp;|&nbsp;O&nbsp;|&nbsp;X'</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #df5000">'--+---+--'</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #df5000">'X&nbsp;|&nbsp;O&nbsp;|&nbsp;O'</span></div><div>&nbsp;&nbsp;<span style="color: #000000">].</span><span style="color: #000000">join</span><span style="color: #000000">(</span><span style="color: #df5000">'\n'</span><span style="color: #000000">)</span></div><div><span style="color: #000000">)</span></div></div><aside class="notes">
<p>another approach would be test on the string representation of the game.
</aside></p>
<aside class="notes">
<p>The input looks pretty nice now - this shows the intention much more
clearly.
</aside></p>
<aside class="notes">
<p>another side-effect is that this actually doesn&#39;t fail anymore as we are
no-longer using the game positions.
</aside></p>
</section><section class="slide" id="slide-2-9">
<h3 id="let-s-make-it-fail">Let&#39;s make it fail</h3>
<aside class="notes">
<p>so we can see the output:
</aside></p>
<div class="code lang-javascript"><div><span style="color: #000000">expect</span><span style="color: #000000">(</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #969896">&nbsp;//&nbsp;X&nbsp;|&nbsp;O&nbsp;|</span></div><div>&nbsp;&nbsp;game<span style="color: #000000">.</span><span style="color: #000000">toString</span><span style="color: #000000">(),</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #969896">&nbsp;//&nbsp;--+---+--</span></div><div>&nbsp;&nbsp;<span style="color: #df5000">'to&nbsp;equal'</span><span style="color: #000000">,</span>&nbsp;<span style="color: #000000">[</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #969896">&nbsp;//&nbsp;&nbsp;&nbsp;|&nbsp;O&nbsp;|&nbsp;X</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #df5000">'O&nbsp;|&nbsp;X&nbsp;|&nbsp;&nbsp;'</span><span style="color: #000000">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #969896">&nbsp;//&nbsp;--+---+--</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #df5000">'--+---+--'</span><span style="color: #000000">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #969896">&nbsp;//&nbsp;X&nbsp;|&nbsp;O&nbsp;|&nbsp;O</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #df5000">'&nbsp;&nbsp;|&nbsp;O&nbsp;|&nbsp;X'</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #df5000">'--+---+--'</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #df5000">'X&nbsp;|&nbsp;O&nbsp;|&nbsp;O'</span></div><div>&nbsp;&nbsp;<span style="color: #000000">].</span><span style="color: #000000">join</span><span style="color: #000000">(</span><span style="color: #df5000">'\n'</span><span style="color: #000000">)</span></div><div><span style="color: #000000">)</span></div></div><aside class="notes">
<p>here I just switched the X and O on the top row.
</aside></p>
</section><section class="slide" id="slide-2-10">
<aside class="notes">
<p>now we get the following error.
</aside></p>
<div class="output"><div><span style="color: red; font-weight: bold">expected</span>&nbsp;<span style="color: #df5000">'X&nbsp;|&nbsp;O&nbsp;|&nbsp;&nbsp;\n--+---+--\n&nbsp;&nbsp;|&nbsp;O&nbsp;|&nbsp;X\n--+---+--\nX&nbsp;|&nbsp;O&nbsp;|&nbsp;O'</span></div><div><span style="color: red; font-weight: bold">to&nbsp;equal</span>&nbsp;<span style="color: #df5000">'O&nbsp;|&nbsp;X&nbsp;|&nbsp;&nbsp;\n--+---+--\n&nbsp;&nbsp;|&nbsp;O&nbsp;|&nbsp;X\n--+---+--\nX&nbsp;|&nbsp;O&nbsp;|&nbsp;O'</span></div><div>&nbsp;</div><div><span style="background-color: red; color: white">X</span><span style="color: red">&nbsp;|&nbsp;</span><span style="background-color: red; color: white">O</span><span style="color: red">&nbsp;|&nbsp;&nbsp;</span></div><div><span style="background-color: green; color: white">O</span><span style="color: green">&nbsp;|&nbsp;</span><span style="background-color: green; color: white">X</span><span style="color: green">&nbsp;|&nbsp;&nbsp;</span></div><div>--+---+--</div><div>&nbsp;&nbsp;|&nbsp;O&nbsp;|&nbsp;X</div><div>--+---+--</div><div>X&nbsp;|&nbsp;O&nbsp;|&nbsp;O</div></div><aside class="notes">
<p>in the bottom we get a useful diff, which shows us that X and O has been
switch around in the top row.
</aside></p>
<aside class="notes">
<p>but the expectation in the top still looks weird.
</aside></p>
<aside class="notes">
<p>so let&#39;s see how we can improve that.
</aside></p>
</section><section class="slide" id="slide-2-11">
<div class="code lang-javascript"><div>expect<span style="color: #000000">.</span><span style="color: #000000">addType</span><span style="color: #000000">({</span></div><div>&nbsp;&nbsp;name<span style="color: #000000">:</span>&nbsp;<span style="color: #df5000">'game'</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;base<span style="color: #000000">:</span>&nbsp;<span style="color: #df5000">'object'</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;identify<span style="color: #000000">:</span>&nbsp;<span style="color: #000000">(</span>value<span style="color: #000000">)</span>&nbsp;<span style="color: #a71d5d">=&gt;</span>&nbsp;value&nbsp;<span style="color: #a71d5d">instanceof</span>&nbsp;Game<span style="color: #000000">,</span></div><div>&nbsp;&nbsp;inspect<span style="color: #000000">:</span>&nbsp;<span style="color: #000000">(</span>game<span style="color: #000000">,</span>&nbsp;depth<span style="color: #000000">,</span>&nbsp;output<span style="color: #000000">)</span>&nbsp;<span style="color: #a71d5d">=&gt;</span>&nbsp;output<span style="color: #000000">.</span><span style="color: #000000">text</span><span style="color: #000000">(</span>game<span style="color: #000000">.</span><span style="color: #000000">toString</span><span style="color: #000000">())</span></div><div><span style="color: #000000">})</span></div></div><aside class="notes">
<p>It is possible to extend Unexpected with new types.
</aside></p>
<aside class="notes">
<ul>
<li>here we create a new type, that extends the object type.</li>
<li>then we let it identify instances of the tic tac toe game.</li>
<li>finally we state that instance of this type should be inspected as the string
representation of the game.</aside>
</li>
</ul>
</section><section class="slide" id="slide-2-12">
<div class="code lang-javascript"><div>expect<span style="color: #000000">.</span><span style="color: #000000">addAssertion</span><span style="color: #000000">(</span><span style="color: #df5000">'&lt;game&gt;&nbsp;to&nbsp;satisfy&nbsp;&lt;string&gt;'</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #000000">(</span>expect<span style="color: #000000">,</span>&nbsp;game<span style="color: #000000">,</span>&nbsp;expectation<span style="color: #000000">)</span>&nbsp;<span style="color: #a71d5d">=&gt;</span>&nbsp;<span style="color: #000000">{</span></div><div>&nbsp;&nbsp;expect<span style="color: #000000">.</span>argsOutput<span style="color: #000000">[</span><span style="color: #0086b3">0</span><span style="color: #000000">]</span>&nbsp;<span style="color: #a71d5d">=</span>&nbsp;output&nbsp;<span style="color: #a71d5d">=&gt;</span>&nbsp;output<span style="color: #000000">.</span><span style="color: #000000">text</span><span style="color: #000000">(</span>expectation<span style="color: #000000">)</span></div><div>&nbsp;&nbsp;<span style="color: #000000">expect</span><span style="color: #000000">(</span>game<span style="color: #000000">.</span><span style="color: #000000">toString</span><span style="color: #000000">(),</span>&nbsp;<span style="color: #df5000">'to&nbsp;equal'</span><span style="color: #000000">,</span>&nbsp;expectation<span style="color: #000000">)</span></div><div><span style="color: #000000">})</span></div></div><aside class="notes">
<p>now that we have a type for the game, we can create a new assertion that
expects a game to satisfy an ascii board.
</aside></p>
<aside class="notes">
<p>the assertion is just delegating to the build-in <code>to equal</code> assertion, and
we are also overriding the default output of the expected board to be printed
out as is.
</aside></p>
</section><section class="slide" id="slide-2-13">
<div class="code lang-javascript"><div><span style="color: #000000">expect</span><span style="color: #000000">(</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #969896">&nbsp;//&nbsp;X&nbsp;|&nbsp;O&nbsp;|</span></div><div>&nbsp;&nbsp;game<span style="color: #000000">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #969896">&nbsp;//&nbsp;--+---+--</span></div><div>&nbsp;&nbsp;<span style="color: #df5000">'to&nbsp;satisfy'</span><span style="color: #000000">,</span>&nbsp;<span style="color: #000000">[</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #969896">&nbsp;//&nbsp;&nbsp;&nbsp;|&nbsp;O&nbsp;|&nbsp;X</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #df5000">'O&nbsp;|&nbsp;X&nbsp;|&nbsp;&nbsp;'</span><span style="color: #000000">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #969896">&nbsp;//&nbsp;--+---+--</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #df5000">'--+---+--'</span><span style="color: #000000">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #969896">&nbsp;//&nbsp;X&nbsp;|&nbsp;O&nbsp;|&nbsp;O</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #df5000">'&nbsp;&nbsp;|&nbsp;O&nbsp;|&nbsp;X'</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #df5000">'--+---+--'</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #df5000">'X&nbsp;|&nbsp;O&nbsp;|&nbsp;O'</span></div><div>&nbsp;&nbsp;<span style="color: #000000">].</span><span style="color: #000000">join</span><span style="color: #000000">(</span><span style="color: #df5000">'\n'</span><span style="color: #000000">)</span></div><div><span style="color: #000000">)</span></div></div><aside class="notes">
<p>Notice: now we can make the expectation directly on the game instance.
</aside></p>
</section><section class="slide" id="slide-2-14">
<div class="output"><div><span style="color: red; font-weight: bold">expected</span></div><div>X&nbsp;|&nbsp;O&nbsp;|&nbsp;&nbsp;</div><div>--+---+--</div><div>&nbsp;&nbsp;|&nbsp;O&nbsp;|&nbsp;X</div><div>--+---+--</div><div>X&nbsp;|&nbsp;O&nbsp;|&nbsp;O</div><div><span style="color: red; font-weight: bold">to&nbsp;satisfy</span></div><div>O&nbsp;|&nbsp;X&nbsp;|&nbsp;&nbsp;</div><div>--+---+--</div><div>&nbsp;&nbsp;|&nbsp;O&nbsp;|&nbsp;X</div><div>--+---+--</div><div>X&nbsp;|&nbsp;O&nbsp;|&nbsp;O</div><div>&nbsp;</div><div><span style="background-color: red; color: white">X</span><span style="color: red">&nbsp;|&nbsp;</span><span style="background-color: red; color: white">O</span><span style="color: red">&nbsp;|&nbsp;&nbsp;</span></div><div><span style="background-color: green; color: white">O</span><span style="color: green">&nbsp;|&nbsp;</span><span style="background-color: green; color: white">X</span><span style="color: green">&nbsp;|&nbsp;&nbsp;</span></div><div>--+---+--</div><div>&nbsp;&nbsp;|&nbsp;O&nbsp;|&nbsp;X</div><div>--+---+--</div><div>X&nbsp;|&nbsp;O&nbsp;|&nbsp;O</div></div><aside class="notes">
<p>here we can see the actual game state, the expected board and a diff
between the two, which shows us that the X and O has be switched in the top row.
</aside></p>
<aside class="notes">
<p>this looks pretty great and is probably how far we can get with the build
in output.
</aside></p>
</section><section class="slide" id="slide-2-15">
<aside class="notes">
<p>we could just have stopped here.
</aside></p>
<aside class="notes">
<p>but let&#39;s see if we can pimp it a bit more.
</aside></p>
<h3 id="pimp-it-a-bit">Pimp it a bit</h3>
<p><img src="./assets/pimpit.jpg" alt="Pimp it" style="border: none"></p>
</section><section class="slide" id="slide-2-16">
<div class="code lang-javascript"><div>expect<span style="color: #000000">.</span><span style="color: #000000">addAssertion</span><span style="color: #000000">(</span><span style="color: #df5000">'&lt;game&gt;&nbsp;to&nbsp;satisfy&nbsp;&lt;string&gt;'</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #000000">(</span>expect<span style="color: #000000">,</span>&nbsp;game<span style="color: #000000">,</span>&nbsp;expectation<span style="color: #000000">)</span>&nbsp;<span style="color: #a71d5d">=&gt;</span>&nbsp;<span style="color: #000000">{</span></div><div>&nbsp;&nbsp;expect<span style="color: #000000">.</span>errorMode&nbsp;<span style="color: #a71d5d">=</span>&nbsp;<span style="color: #df5000">'bubble'</span></div><div>&nbsp;&nbsp;const&nbsp;actual&nbsp;<span style="color: #a71d5d">=</span>&nbsp;<span style="color: #000000">boardToJS</span><span style="color: #000000">(</span>game<span style="color: #000000">.</span><span style="color: #000000">toString</span><span style="color: #000000">())</span></div><div>&nbsp;&nbsp;const&nbsp;expected&nbsp;<span style="color: #a71d5d">=</span>&nbsp;<span style="color: #000000">boardToJS</span><span style="color: #000000">(</span>expectation<span style="color: #000000">)</span></div><div>&nbsp;&nbsp;<span style="color: #a71d5d">if</span>&nbsp;<span style="color: #000000">(</span><span style="color: #a71d5d">!</span>expect<span style="color: #000000">.</span><span style="color: #000000">equal</span><span style="color: #000000">(</span>actual<span style="color: #000000">,</span>&nbsp;expected<span style="color: #000000">))</span>&nbsp;<span style="color: #000000">{</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;expect<span style="color: #000000">.</span><span style="color: #000000">fail</span><span style="color: #000000">(</span>output&nbsp;<span style="color: #a71d5d">=&gt;</span>&nbsp;<span style="color: #000000">{</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output<span style="color: #000000">.</span><span style="color: #000000">boardDiff</span><span style="color: #000000">(</span>expected<span style="color: #000000">,</span>&nbsp;actual<span style="color: #000000">)</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #000000">})</span></div><div>&nbsp;&nbsp;<span style="color: #000000">}</span></div><div><span style="color: #000000">})</span></div></div><aside class="notes">
<ul>
<li>First we tell unexpected to discard the standard error message and use the one
we will be throwing.</li>
<li>Then we parse the string representation of the game and the expected board.</li>
<li>compare the two boards.</li>
<li>In case the two boards are not the same, we throw an error with a board diff
showing the actual and expected boards side-by-side.</aside>
</li>
</ul>
<aside class="notes">
<p>I won&#39;t go into how the board diff is created, but it is basically just
using magicpen to print out the two boards.
</aside></p>
</section><section class="slide" id="slide-2-17">
<div class="code lang-javascript"><div><span style="color: #000000">expect</span><span style="color: #000000">(</span></div><div>&nbsp;&nbsp;game<span style="color: #000000">,</span></div><div>&nbsp;&nbsp;<span style="color: #df5000">'to&nbsp;satisfy'</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;`O&nbsp;<span style="color: #a71d5d">|</span>&nbsp;X&nbsp;<span style="color: #a71d5d">|</span>&nbsp;&nbsp;</div><div>&nbsp;&nbsp;&nbsp;<span style="color: #a71d5d">--+---+--</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #a71d5d">|</span>&nbsp;O&nbsp;<span style="color: #a71d5d">|</span>&nbsp;X</div><div>&nbsp;&nbsp;&nbsp;<span style="color: #a71d5d">--+---+--</span></div><div>&nbsp;&nbsp;&nbsp;X&nbsp;<span style="color: #a71d5d">|</span>&nbsp;O&nbsp;<span style="color: #a71d5d">|</span>&nbsp;O`</div><div><span style="color: #000000">)</span></div></div><aside class="notes">
<p>because we parse the boards, we can now use a multi-line string to input
the expected board, this make the test even more readable.
</aside></p>
</section><section class="slide" id="slide-2-18">
<aside class="notes">
<p>now we get the following error:
</aside></p>
<div class="output"><div><div style="display: inline-block; vertical-align: top"><div><span style="color: gray">Expected</span></div><div><span style="color: green; font-weight: bold">O</span>&nbsp;|&nbsp;<span style="color: green; font-weight: bold">X</span>&nbsp;|&nbsp;&nbsp;</div><div>--+---+--</div><div>&nbsp;&nbsp;|&nbsp;O&nbsp;|&nbsp;X</div><div>--+---+--</div><div>X&nbsp;|&nbsp;O&nbsp;|&nbsp;O</div></div>&nbsp;&nbsp;&nbsp;<div style="display: inline-block; vertical-align: top"><div><span style="color: gray">Actual</span></div><div><span style="color: red; font-weight: bold">X</span>&nbsp;|&nbsp;<span style="color: red; font-weight: bold">O</span>&nbsp;|&nbsp;&nbsp;</div><div>--+---+--</div><div>&nbsp;&nbsp;|&nbsp;O&nbsp;|&nbsp;X</div><div>--+---+--</div><div>X&nbsp;|&nbsp;O&nbsp;|&nbsp;O</div></div></div></div><aside class="notes">
<p>the custom board diff shows us exactly what is wrong.
On the left side we see the expected board where the differences is highlighted
with green.
On the right side we see the actual state of the game, with the differences
highlighted with red.
</aside></p>
<aside class="notes">
<p>let&#39;s see if we can take these concepts a bit further.
</aside></p>
</section><section class="slide" id="slide-2-19">
<div class="code lang-javascript"><div><span style="color: #000000">expect</span><span style="color: #000000">(</span></div><div>&nbsp;&nbsp;`O&nbsp;<span style="color: #a71d5d">|</span>&nbsp;X&nbsp;<span style="color: #a71d5d">|</span>&nbsp;O</div><div>&nbsp;&nbsp;&nbsp;<span style="color: #a71d5d">--+---+--</span></div><div>&nbsp;&nbsp;&nbsp;X&nbsp;<span style="color: #a71d5d">|</span>&nbsp;&nbsp;&nbsp;<span style="color: #a71d5d">|</span>&nbsp;&nbsp;</div><div>&nbsp;&nbsp;&nbsp;<span style="color: #a71d5d">--+---+--</span></div><div>&nbsp;&nbsp;&nbsp;O&nbsp;<span style="color: #a71d5d">|</span>&nbsp;X&nbsp;<span style="color: #a71d5d">|</span>&nbsp;O`<span style="color: #000000">,</span></div><div>&nbsp;&nbsp;<span style="color: #df5000">'when&nbsp;placing&nbsp;X&nbsp;at&nbsp;position'</span><span style="color: #000000">,</span>&nbsp;<span style="color: #0086b3">5</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;<span style="color: #df5000">'to&nbsp;satisfy'</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;`O&nbsp;<span style="color: #a71d5d">|</span>&nbsp;X&nbsp;<span style="color: #a71d5d">|</span>&nbsp;O</div><div>&nbsp;&nbsp;&nbsp;<span style="color: #a71d5d">--+---+--</span></div><div>&nbsp;&nbsp;&nbsp;X&nbsp;<span style="color: #a71d5d">|</span>&nbsp;&nbsp;&nbsp;<span style="color: #a71d5d">|</span>&nbsp;X</div><div>&nbsp;&nbsp;&nbsp;<span style="color: #a71d5d">--+---+--</span></div><div>&nbsp;&nbsp;&nbsp;O&nbsp;<span style="color: #a71d5d">|</span>&nbsp;X&nbsp;<span style="color: #a71d5d">|</span>&nbsp;O`</div><div><span style="color: #000000">)</span></div></div><aside class="notes">
<p>it might get a bit tedious to build up the game state manually for every
test.
</aside></p>
<aside class="notes">
<p>so we can make a special assertion that will build a game instance from an
ascii board, make a move for a given player and forward the game instance to the
next assertion.
</aside></p>
</section><section class="slide" id="slide-2-20">
<aside class="notes">
<p>position 5 is of cause in the center, so we get the following error:
</aside></p>
<div class="output"><div><span style="color: red; font-weight: bold">When&nbsp;placing&nbsp;</span><span style="color: #df5000">X</span><span style="color: red; font-weight: bold">&nbsp;at&nbsp;position&nbsp;</span><span style="color: #0086b3">5</span><span style="color: red; font-weight: bold">&nbsp;on&nbsp;board:</span></div><div><div style="display: inline-block; vertical-align: top"><div>O&nbsp;|&nbsp;X&nbsp;|&nbsp;O</div><div>--+---+--</div><div>X&nbsp;|&nbsp;<span style="color: #aaa">X</span>&nbsp;|&nbsp;&nbsp;</div><div>--+---+--</div><div>O&nbsp;|&nbsp;X&nbsp;|&nbsp;O</div></div></div><div>&nbsp;</div><div><div style="display: inline-block; vertical-align: top"><div><span style="color: gray">Expected</span></div><div>O&nbsp;|&nbsp;X&nbsp;|&nbsp;O</div><div>--+---+--</div><div>X&nbsp;|&nbsp;<span style="color: green; font-weight: bold">&nbsp;</span>&nbsp;|&nbsp;<span style="color: green; font-weight: bold">X</span></div><div>--+---+--</div><div>O&nbsp;|&nbsp;X&nbsp;|&nbsp;O</div></div>&nbsp;&nbsp;&nbsp;<div style="display: inline-block; vertical-align: top"><div><span style="color: gray">Actual</span></div><div>O&nbsp;|&nbsp;X&nbsp;|&nbsp;O</div><div>--+---+--</div><div>X&nbsp;|&nbsp;<span style="color: red; font-weight: bold">X</span>&nbsp;|&nbsp;<span style="color: red; font-weight: bold">&nbsp;</span></div><div>--+---+--</div><div>O&nbsp;|&nbsp;X&nbsp;|&nbsp;O</div></div></div></div></section><section class="slide" id="slide-2-21">
<aside class="notes">
<p>the cool things about the above assertion is that we reuse it in all sorts
of scenarios.
</aside></p>
<div class="code lang-javascript"><div><span style="color: #000000">expect</span><span style="color: #000000">(</span></div><div>&nbsp;&nbsp;`&nbsp;&nbsp;<span style="color: #a71d5d">|</span>&nbsp;&nbsp;&nbsp;<span style="color: #a71d5d">|</span>&nbsp;</div><div>&nbsp;&nbsp;&nbsp;<span style="color: #a71d5d">--+---+--</span></div><div>&nbsp;&nbsp;&nbsp;X&nbsp;<span style="color: #a71d5d">|</span>&nbsp;O&nbsp;<span style="color: #a71d5d">|</span>&nbsp;X</div><div>&nbsp;&nbsp;&nbsp;<span style="color: #a71d5d">--+---+--</span></div><div>&nbsp;&nbsp;&nbsp;O&nbsp;<span style="color: #a71d5d">|</span>&nbsp;X&nbsp;<span style="color: #a71d5d">|</span>&nbsp;O`<span style="color: #000000">,</span></div><div>&nbsp;&nbsp;<span style="color: #df5000">'when&nbsp;placing&nbsp;O&nbsp;at&nbsp;position'</span><span style="color: #000000">,</span>&nbsp;<span style="color: #0086b3">3</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;<span style="color: #df5000">'to&nbsp;have&nbsp;O&nbsp;as&nbsp;the&nbsp;winner'</span></div><div><span style="color: #000000">)</span></div></div></section><section class="slide" id="slide-2-22">
<div class="output"><div><span style="color: red; font-weight: bold">When&nbsp;placing&nbsp;</span><span style="color: #df5000">O</span><span style="color: red; font-weight: bold">&nbsp;at&nbsp;position&nbsp;</span><span style="color: #0086b3">3</span><span style="color: red; font-weight: bold">&nbsp;on&nbsp;board:</span></div><div><div style="display: inline-block; vertical-align: top"><div>&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;|&nbsp;<span style="color: #aaa">O</span></div><div>--+---+--</div><div>X&nbsp;|&nbsp;O&nbsp;|&nbsp;X</div><div>--+---+--</div><div>O&nbsp;|&nbsp;X&nbsp;|&nbsp;O</div></div></div><div>&nbsp;</div><div><span style="color: red; font-weight: bold">expected</span></div><div>&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;|&nbsp;O</div><div>--+---+--</div><div>X&nbsp;|&nbsp;O&nbsp;|&nbsp;X</div><div>--+---+--</div><div>O&nbsp;|&nbsp;X&nbsp;|&nbsp;O</div><div><span style="color: red; font-weight: bold">to&nbsp;have&nbsp;O&nbsp;as&nbsp;the&nbsp;winner</span></div><div>&nbsp;&nbsp;<div style="display: inline-block; vertical-align: top"><div><span style="color: red; font-weight: bold">the&nbsp;game&nbsp;is&nbsp;not&nbsp;finished&nbsp;yet</span></div></div></div></div><aside class="notes">
<p>ups that failed - don&#39;t trust everything you download from NPM.
</aside></p>
</section></section><section class="section" id="section-3"><section class="slide" id="slide-3-0">
<h3 id="testing-react-components">Testing React components</h3>
<h4 id="with-unexpected-react">with unexpected-react</h4>
<hr>
<p>Dave Brotherstone - @bruderstein</p>
<aside class="notes">
<p>In this section I want to show you a really cool example of what you can
achieve with these techniques. We will be looking at an unexpected plugin for
test React components contributed by Dave Brotherstone.
</aside></p>
</section><section class="slide" id="slide-3-1">
<p><img src="./assets/counter.png"></p>
<div class="code lang-javascript"><div>import&nbsp;React<span style="color: #000000">,</span>&nbsp;<span style="color: #000000">{</span>&nbsp;Component&nbsp;<span style="color: #000000">}</span>&nbsp;from&nbsp;<span style="color: #df5000">'react'</span></div><div>&nbsp;</div><div>class&nbsp;Counter&nbsp;extends&nbsp;Component&nbsp;<span style="color: #000000">{</span></div><div>&nbsp;&nbsp;constructor&nbsp;<span style="color: #000000">(</span>props<span style="color: #000000">)</span>&nbsp;<span style="color: #000000">{</span>&nbsp;<span style="color: #000000">super</span><span style="color: #000000">(</span>props<span style="color: #000000">);</span>&nbsp;<span style="color: #a71d5d">this</span><span style="color: #000000">.</span>state&nbsp;<span style="color: #a71d5d">=</span>&nbsp;<span style="color: #000000">{</span>&nbsp;value<span style="color: #000000">:</span>&nbsp;<span style="color: #0086b3">0</span>&nbsp;<span style="color: #000000">}</span>&nbsp;<span style="color: #000000">}</span>&nbsp;</div><div>&nbsp;&nbsp;increment&nbsp;<span style="color: #a71d5d">=</span>&nbsp;<span style="color: #000000">()</span>&nbsp;<span style="color: #a71d5d">=&gt;</span>&nbsp;<span style="color: #a71d5d">this</span><span style="color: #000000">.</span><span style="color: #000000">setState</span><span style="color: #000000">({</span>&nbsp;value<span style="color: #000000">:</span>&nbsp;<span style="color: #a71d5d">this</span><span style="color: #000000">.</span>state<span style="color: #000000">.</span>value&nbsp;<span style="color: #a71d5d">+</span>&nbsp;<span style="color: #0086b3">1</span>&nbsp;<span style="color: #000000">})</span></div><div>&nbsp;&nbsp;decrement&nbsp;<span style="color: #a71d5d">=</span>&nbsp;<span style="color: #000000">()</span>&nbsp;<span style="color: #a71d5d">=&gt;</span>&nbsp;<span style="color: #a71d5d">this</span><span style="color: #000000">.</span><span style="color: #000000">setState</span><span style="color: #000000">({</span>&nbsp;value<span style="color: #000000">:</span>&nbsp;<span style="color: #a71d5d">this</span><span style="color: #000000">.</span>state<span style="color: #000000">.</span>value&nbsp;<span style="color: #a71d5d">-</span>&nbsp;<span style="color: #0086b3">1</span>&nbsp;<span style="color: #000000">})</span></div><div>&nbsp;</div><div>&nbsp;&nbsp;render&nbsp;<span style="color: #a71d5d">=</span>&nbsp;<span style="color: #000000">()</span>&nbsp;<span style="color: #a71d5d">=&gt;</span>&nbsp;<span style="color: #000000">(</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #a71d5d">&lt;</span>div<span style="color: #a71d5d">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #a71d5d">&lt;</span>button&nbsp;onClick<span style="color: #a71d5d">=</span><span style="color: #000000">{</span><span style="color: #a71d5d">this</span><span style="color: #000000">.</span>increment<span style="color: #000000">}</span><span style="color: #a71d5d">&gt;+&lt;/</span>button<span style="color: #a71d5d">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #a71d5d">&lt;</span>div&nbsp;className<span style="color: #a71d5d">=</span><span style="color: #df5000">'value'</span><span style="color: #a71d5d">&gt;</span><span style="color: #000000">{</span>`$<span style="color: #000000">{</span><span style="color: #a71d5d">this</span><span style="color: #000000">.</span>state<span style="color: #000000">.</span>value<span style="color: #000000">}</span>`<span style="color: #000000">}</span><span style="color: #a71d5d">&lt;/</span>div<span style="color: #a71d5d">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #a71d5d">&lt;</span>button&nbsp;onClick<span style="color: #a71d5d">=</span><span style="color: #000000">{</span><span style="color: #a71d5d">this</span><span style="color: #000000">.</span>decrement<span style="color: #000000">}</span><span style="color: #a71d5d">&gt;-&lt;/</span>button<span style="color: #a71d5d">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #a71d5d">&lt;/</span>div<span style="color: #a71d5d">&gt;</span></div><div>&nbsp;&nbsp;<span style="color: #000000">)</span></div><div><span style="color: #000000">}</span></div></div><aside class="notes">
<p>let&#39;s make a small counter component like the one you see in the top.
</aside></p>
<aside class="notes">
<p>when you click on the increment button the value get&#39;s incremented - you
get the point.
</aside></p>
</section><section class="slide" id="slide-3-2">
<div class="code lang-javascript"><div>import&nbsp;TestUtils&nbsp;from&nbsp;<span style="color: #df5000">'react-addons-test-utils'</span></div><div>&nbsp;</div><div>const&nbsp;rendered&nbsp;<span style="color: #a71d5d">=</span>&nbsp;TestUtils<span style="color: #000000">.</span><span style="color: #000000">renderIntoDocument</span><span style="color: #000000">(</span></div><div>&nbsp;&nbsp;<span style="color: #a71d5d">&lt;</span>Counter<span style="color: #a71d5d">/&gt;</span></div><div><span style="color: #000000">)</span></div><div>&nbsp;</div><div><span style="color: #000000">expect</span><span style="color: #000000">(</span></div><div>&nbsp;&nbsp;rendered<span style="color: #000000">,</span></div><div>&nbsp;&nbsp;<span style="color: #df5000">'to&nbsp;have&nbsp;rendered'</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;<span style="color: #a71d5d">&lt;</span>div<span style="color: #a71d5d">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #a71d5d">&lt;</span>button<span style="color: #a71d5d">&gt;+&lt;/</span>button<span style="color: #a71d5d">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #a71d5d">&lt;</span>div&nbsp;className<span style="color: #a71d5d">=</span><span style="color: #df5000">'value'</span><span style="color: #a71d5d">&gt;</span><span style="color: #0086b3">0</span><span style="color: #a71d5d">&lt;/</span>div<span style="color: #a71d5d">&gt;</span></div><div>&nbsp;&nbsp;&nbsp;&nbsp;<span style="color: #a71d5d">&lt;</span>button<span style="color: #a71d5d">&gt;-&lt;/</span>button<span style="color: #a71d5d">&gt;</span></div><div>&nbsp;&nbsp;<span style="color: #a71d5d">&lt;/</span>div<span style="color: #a71d5d">&gt;</span></div><div><span style="color: #000000">)</span></div></div><aside class="notes">
<p>first we render the counter into the document using the virtual DOM
renderer.
</aside></p>
<aside class="notes">
<p>then we assert that the rendered counter has the markup seen on the slide.
</aside></p>
<aside class="notes">
<p>in this case the value should be zero.
</aside></p>
</section><section class="slide" id="slide-3-3">
<p>Only mention your needs</p>
<div class="code lang-javascript"><div><span style="color: #000000">expect</span><span style="color: #000000">(</span></div><div>&nbsp;&nbsp;rendered<span style="color: #000000">,</span></div><div>&nbsp;&nbsp;<span style="color: #df5000">'to&nbsp;have&nbsp;rendered'</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;<span style="color: #a71d5d">&lt;</span>div<span style="color: #a71d5d">&gt;&lt;</span>div&nbsp;className<span style="color: #a71d5d">=</span><span style="color: #df5000">'value'</span><span style="color: #a71d5d">&gt;</span><span style="color: #0086b3">0</span><span style="color: #a71d5d">&lt;/</span>div<span style="color: #a71d5d">&gt;&lt;/</span>div<span style="color: #a71d5d">&gt;</span></div><div><span style="color: #000000">)</span></div></div></section><section class="slide" id="slide-3-4">
<div class="code lang-javascript"><div><span style="color: #000000">expect</span><span style="color: #000000">(</span></div><div>&nbsp;&nbsp;rendered<span style="color: #000000">,</span></div><div>&nbsp;&nbsp;<span style="color: #df5000">'queried&nbsp;for'</span><span style="color: #000000">,</span>&nbsp;</div><div>&nbsp;&nbsp;<span style="color: #a71d5d">&lt;</span>div&nbsp;className<span style="color: #a71d5d">=</span><span style="color: #df5000">'value'</span><span style="color: #a71d5d">/&gt;</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;<span style="color: #df5000">'to&nbsp;have&nbsp;rendered'</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;<span style="color: #a71d5d">&lt;</span>div&nbsp;className<span style="color: #a71d5d">=</span><span style="color: #df5000">'shiny'</span><span style="color: #a71d5d">/&gt;</span></div><div><span style="color: #000000">)</span></div></div></section><section class="slide" id="slide-3-5">
<div class="output"><div><span style="color: red; font-weight: bold">expected</span></div><div><span style="color: #000000">&lt;</span><span style="color: #63a35c">Counter</span><span style="color: #000000">&gt;</span></div><div>&nbsp;&nbsp;<div style="display: inline-block; vertical-align: top"><div><span style="color: #000000">&lt;</span><span style="color: #63a35c">div</span><span style="color: #000000">&gt;</span></div><div>&nbsp;&nbsp;<div style="display: inline-block; vertical-align: top"><div><span style="color: #000000">&lt;</span><span style="color: #63a35c">button</span>&nbsp;<span style="color: #df5000">onClick</span><span style="color: #000000">={</span><span style="color: #a71d5d">function&nbsp;</span><span style="color: #000000">()&nbsp;{&nbsp;/*&nbsp;...&nbsp;*/&nbsp;}}&gt;</span><div style="display: inline-block; vertical-align: top"><div>+</div></div><span style="color: #000000">&lt;/</span><span style="color: #63a35c">button</span><span style="color: #000000">&gt;</span></div><div><span style="color: #000000">&lt;</span><span style="color: #63a35c">div</span>&nbsp;<span style="color: #df5000">className</span><span style="color: #000000">=&quot;</span><span style="color: #df5000">value</span><span style="color: #000000">&quot;&gt;</span><div style="display: inline-block; vertical-align: top"><div>0</div></div><span style="color: #000000">&lt;/</span><span style="color: #63a35c">div</span><span style="color: #000000">&gt;</span></div><div><span style="color: #000000">&lt;</span><span style="color: #63a35c">button</span>&nbsp;<span style="color: #df5000">onClick</span><span style="color: #000000">={</span><span style="color: #a71d5d">function&nbsp;</span><span style="color: #000000">()&nbsp;{&nbsp;/*&nbsp;...&nbsp;*/&nbsp;}}&gt;</span><div style="display: inline-block; vertical-align: top"><div>-</div></div><span style="color: #000000">&lt;/</span><span style="color: #63a35c">button</span><span style="color: #000000">&gt;</span></div></div></div><div><span style="color: #000000">&lt;/</span><span style="color: #63a35c">div</span><span style="color: #000000">&gt;</span></div></div></div><div><span style="color: #000000">&lt;/</span><span style="color: #63a35c">Counter</span><span style="color: #000000">&gt;</span></div><div><span style="color: red; font-weight: bold">queried&nbsp;for</span>&nbsp;<span style="color: #000000">&lt;</span><span style="color: #63a35c">div</span>&nbsp;<span style="color: #df5000">className</span><span style="color: #000000">=&quot;</span><span style="color: #df5000">value</span><span style="color: #000000">&quot;</span>&nbsp;<span style="color: #000000">/&gt;</span>&nbsp;<span style="color: red; font-weight: bold">to&nbsp;have&nbsp;rendered</span>&nbsp;<span style="color: #000000">&lt;</span><span style="color: #63a35c">div</span>&nbsp;<span style="color: #df5000">className</span><span style="color: #000000">=&quot;</span><span style="color: #df5000">shiny</span><span style="color: #000000">&quot;</span>&nbsp;<span style="color: #000000">/&gt;</span></div><div>&nbsp;</div><div><span style="color: #000000">&lt;</span><span style="color: #63a35c">div</span>&nbsp;<span style="color: #df5000">className</span><span style="color: #000000">=&quot;</span><span style="color: #df5000">value</span><span style="color: #000000">&quot;</span>&nbsp;<div style="display: inline-block; vertical-align: top"><div><span style="color: red; font-weight: bold">//</span></div></div>&nbsp;<div style="display: inline-block; vertical-align: top"><div><span style="color: red; font-weight: bold">missing&nbsp;class</span>&nbsp;<span style="color: #df5000">'shiny'</span></div></div></div><div><span style="color: #000000">&gt;</span></div><div>&nbsp;&nbsp;<div style="display: inline-block; vertical-align: top"><div>0</div></div></div><div><span style="color: #000000">&lt;/</span><span style="color: #63a35c">div</span><span style="color: #000000">&gt;</span></div></div></section><section class="slide" id="slide-3-6">
<div class="code lang-javascript"><div><span style="color: #000000">expect</span><span style="color: #000000">(</span></div><div>&nbsp;&nbsp;rendered<span style="color: #000000">,</span></div><div>&nbsp;&nbsp;<span style="color: #df5000">'queried&nbsp;for'</span><span style="color: #000000">,</span>&nbsp;</div><div>&nbsp;&nbsp;<span style="color: #a71d5d">&lt;</span>div&nbsp;className<span style="color: #a71d5d">=</span><span style="color: #df5000">'value'</span><span style="color: #a71d5d">/&gt;</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;<span style="color: #df5000">'to&nbsp;have&nbsp;rendered'</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;<span style="color: #a71d5d">&lt;</span>div<span style="color: #a71d5d">&gt;</span><span style="color: #000000">{</span>&nbsp;expect<span style="color: #000000">.</span><span style="color: #000000">it</span><span style="color: #000000">(</span><span style="color: #df5000">'to&nbsp;match'</span><span style="color: #000000">,</span>&nbsp;<span style="color: #183691">/\d+/</span><span style="color: #000000">)</span>&nbsp;<span style="color: #000000">}</span><span style="color: #a71d5d">&lt;/</span>div<span style="color: #a71d5d">&gt;</span></div><div><span style="color: #000000">)</span></div></div></section><section class="slide" id="slide-3-7">
<div class="code lang-javascript"><div><span style="color: #000000">expect</span><span style="color: #000000">(</span></div><div>&nbsp;&nbsp;rendered<span style="color: #000000">,</span></div><div>&nbsp;&nbsp;<span style="color: #df5000">'with&nbsp;event&nbsp;click'</span><span style="color: #000000">,</span>&nbsp;<span style="color: #df5000">'on'</span><span style="color: #000000">,</span>&nbsp;<span style="color: #a71d5d">&lt;</span>button<span style="color: #a71d5d">&gt;+&lt;/</span>button<span style="color: #a71d5d">&gt;</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;<span style="color: #df5000">'with&nbsp;event&nbsp;click'</span><span style="color: #000000">,</span>&nbsp;<span style="color: #df5000">'on'</span><span style="color: #000000">,</span>&nbsp;<span style="color: #a71d5d">&lt;</span>button<span style="color: #a71d5d">&gt;-&lt;/</span>button<span style="color: #a71d5d">&gt;</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;<span style="color: #df5000">'with&nbsp;event&nbsp;click'</span><span style="color: #000000">,</span>&nbsp;<span style="color: #df5000">'on'</span><span style="color: #000000">,</span>&nbsp;<span style="color: #a71d5d">&lt;</span>button<span style="color: #a71d5d">&gt;+&lt;/</span>button<span style="color: #a71d5d">&gt;</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;<span style="color: #df5000">'with&nbsp;event&nbsp;click'</span><span style="color: #000000">,</span>&nbsp;<span style="color: #df5000">'on'</span><span style="color: #000000">,</span>&nbsp;<span style="color: #a71d5d">&lt;</span>button<span style="color: #a71d5d">&gt;+&lt;/</span>button<span style="color: #a71d5d">&gt;</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;<span style="color: #df5000">'to&nbsp;contain'</span><span style="color: #000000">,</span>&nbsp;<span style="color: #a71d5d">&lt;</span>div&nbsp;className<span style="color: #a71d5d">=</span><span style="color: #df5000">'value'</span><span style="color: #a71d5d">&gt;</span><span style="color: #0086b3">2</span><span style="color: #a71d5d">&lt;/</span>div<span style="color: #a71d5d">&gt;</span></div><div><span style="color: #000000">)</span></div></div><aside class="notes">
<p>now let&#39;s try to increment and decrement the value a few times and see
that we get the right result.
</aside></p>
<aside class="notes">
<p>here Dave uses the same techniques as saw in the previous section. The
<code>with event</code> assertion emits an event on the component and forward it to
the next assertion.
</aside></p>
</section><section class="slide" id="slide-3-8">
<div class="code lang-javascript"><div><span style="color: #000000">expect</span><span style="color: #000000">(</span></div><div>&nbsp;&nbsp;rendered<span style="color: #000000">,</span></div><div>&nbsp;&nbsp;<span style="color: #df5000">'with&nbsp;event&nbsp;click'</span><span style="color: #000000">,</span>&nbsp;<span style="color: #df5000">'on'</span><span style="color: #000000">,</span>&nbsp;<span style="color: #a71d5d">&lt;</span>button<span style="color: #a71d5d">&gt;-&lt;/</span>button<span style="color: #a71d5d">&gt;</span><span style="color: #000000">,</span></div><div>&nbsp;&nbsp;<span style="color: #df5000">'to&nbsp;contain'</span><span style="color: #000000">,</span>&nbsp;<span style="color: #a71d5d">&lt;</span>div&nbsp;className<span style="color: #a71d5d">=</span><span style="color: #df5000">'value'</span><span style="color: #a71d5d">&gt;</span><span style="color: #0086b3">3</span><span style="color: #a71d5d">&lt;/</span>div<span style="color: #a71d5d">&gt;</span></div><div><span style="color: #000000">)</span></div></div><aside class="notes">
<p>let&#39;s try to make it fail.
</aside></p>
</section><section class="slide" id="slide-3-9">
<div class="output"><div><span style="color: red; font-weight: bold">expected</span></div><div><span style="color: #000000">&lt;</span><span style="color: #63a35c">Counter</span><span style="color: #000000">&gt;</span></div><div>&nbsp;&nbsp;<div style="display: inline-block; vertical-align: top"><div><span style="color: #000000">&lt;</span><span style="color: #63a35c">div</span><span style="color: #000000">&gt;</span></div><div>&nbsp;&nbsp;<div style="display: inline-block; vertical-align: top"><div><span style="color: #000000">&lt;</span><span style="color: #63a35c">button</span>&nbsp;<span style="color: #df5000">onClick</span><span style="color: #000000">={</span><span style="color: #a71d5d">function&nbsp;</span><span style="color: #000000">()&nbsp;{&nbsp;/*&nbsp;...&nbsp;*/&nbsp;}}&gt;</span><div style="display: inline-block; vertical-align: top"><div>+</div></div><span style="color: #000000">&lt;/</span><span style="color: #63a35c">button</span><span style="color: #000000">&gt;</span></div><div><span style="color: #000000">&lt;</span><span style="color: #63a35c">div</span>&nbsp;<span style="color: #df5000">className</span><span style="color: #000000">=&quot;</span><span style="color: #df5000">value</span><span style="color: #000000">&quot;&gt;</span><div style="display: inline-block; vertical-align: top"><div>1</div></div><span style="color: #000000">&lt;/</span><span style="color: #63a35c">div</span><span style="color: #000000">&gt;</span></div><div><span style="color: #000000">&lt;</span><span style="color: #63a35c">button</span>&nbsp;<span style="color: #df5000">onClick</span><span style="color: #000000">={</span><span style="color: #a71d5d">function&nbsp;</span><span style="color: #000000">()&nbsp;{&nbsp;/*&nbsp;...&nbsp;*/&nbsp;}}&gt;</span><div style="display: inline-block; vertical-align: top"><div>-</div></div><span style="color: #000000">&lt;/</span><span style="color: #63a35c">button</span><span style="color: #000000">&gt;</span></div></div></div><div><span style="color: #000000">&lt;/</span><span style="color: #63a35c">div</span><span style="color: #000000">&gt;</span></div></div></div><div><span style="color: #000000">&lt;/</span><span style="color: #63a35c">Counter</span><span style="color: #000000">&gt;</span></div><div><span style="color: red; font-weight: bold">with&nbsp;event</span>&nbsp;<span style="color: #df5000">'click'</span>&nbsp;<span style="color: red; font-weight: bold">on</span>&nbsp;<span style="color: #000000">&lt;</span><span style="color: #63a35c">button</span><span style="color: #000000">&gt;</span><div style="display: inline-block; vertical-align: top"><div>-</div></div><span style="color: #000000">&lt;/</span><span style="color: #63a35c">button</span><span style="color: #000000">&gt;</span>&nbsp;<span style="color: red; font-weight: bold">to&nbsp;contain</span>&nbsp;<span style="color: #000000">&lt;</span><span style="color: #63a35c">div</span>&nbsp;<span style="color: #df5000">className</span><span style="color: #000000">=&quot;</span><span style="color: #df5000">value</span><span style="color: #000000">&quot;&gt;</span><div style="display: inline-block; vertical-align: top"><div>3</div></div><span style="color: #000000">&lt;/</span><span style="color: #63a35c">div</span><span style="color: #000000">&gt;</span></div><div>&nbsp;</div><div><span style="color: red; font-weight: bold">the&nbsp;best&nbsp;match&nbsp;was</span></div><div><span style="color: #000000">&lt;</span><span style="color: #63a35c">div</span>&nbsp;<span style="color: #df5000">className</span><span style="color: #000000">=&quot;</span><span style="color: #df5000">value</span><span style="color: #000000">&quot;&gt;</span></div><div>&nbsp;&nbsp;<div style="display: inline-block; vertical-align: top"><div><div style="display: inline-block; vertical-align: top"><div><div style="display: inline-block; vertical-align: top"><div>1</div></div>&nbsp;<div style="display: inline-block; vertical-align: top"><div><span style="color: red; font-weight: bold">//</span></div><div><span style="color: red; font-weight: bold">//</span></div></div>&nbsp;<div style="display: inline-block; vertical-align: top"><div><span style="background-color: red; color: white">1</span></div><div><span style="background-color: green; color: white">3</span></div></div></div></div></div></div></div><div><span style="color: #000000">&lt;/</span><span style="color: #63a35c">div</span><span style="color: #000000">&gt;</span></div></div></section></section><section class="section" id="section-4"><section class="slide" id="slide-4-0">
<h2 id="testable-documentation">Testable documentation</h2>
<aside class="notes">
<p>documentation for a lot of libraries is either lacking, out of sync or
missing. The main problem is that if you have been burned a few times, you will
stop trusting the documentation.
Then you will start looking at the tests or the code to figure out how the API
works - if you think about it, tests are basically the perfect tool for
describing how an API should work.
</aside></p>
</section><section class="slide" id="slide-4-1">
<h3 id="mdn-object-keys">MDN: Object.keys</h3>
<p><img src="./assets/documentation.png"></p>
<p>vs</p>
<div class="code lang-javascript"><div><span style="color: #000000">expect</span><span style="color: #000000">(</span>Object<span style="color: #000000">.</span><span style="color: #000000">keys</span><span style="color: #000000">([</span><span style="color: #df5000">'a'</span><span style="color: #000000">,</span>&nbsp;<span style="color: #df5000">'b'</span><span style="color: #000000">,</span>&nbsp;<span style="color: #df5000">'c'</span><span style="color: #000000">]),</span>&nbsp;<span style="color: #df5000">'to&nbsp;equal'</span><span style="color: #000000">,</span>&nbsp;<span style="color: #000000">[</span><span style="color: #df5000">'0'</span><span style="color: #000000">,</span>&nbsp;<span style="color: #df5000">'1'</span><span style="color: #000000">,</span>&nbsp;<span style="color: #df5000">'2'</span><span style="color: #000000">])</span></div></div><aside class="notes">
<p>But I would still like to write free form text in between the examples.
So I came up with the idea of just evaluating code blocks within a markdown file.
</aside></p>
</section><section class="slide" id="slide-4-2">
<h3 id="unexpected-markdown">unexpected-markdown</h3>
<aside class="notes">
<p>I been working on a tool called unexpected-markdown together with Andreas
Lind that takes a markdown file and transpile it into a Mocha test file.
</aside></p>
<ul>
<li>Examples are executed in the content of the examples before it</li>
<li>Support for async examples by returning a promise</li>
<li>You can skip examples</li>
<li>You can assert that an example throw a given error </li>
<li>Source maps</li>
</ul>
</section><section class="slide" id="slide-4-3">
<h3 id="example">Example</h3>
<p><a href="http://unexpected.js.org">http://unexpected.js.org</a></p>
</section></section><section class="section" id="section-5"><section class="slide" id="slide-5-0">
<h2 id="the-end">The end</h2>
<hr>
<p><a href="http://unexpected.js.org">http://unexpected.js.org</a></p>
<p>@sunesimonsen / @unexpectedjs</p>
</section></section></article><script src="./static/vanilla-touchwipe.js"></script><script src="./static/presentation.js"></script></body></html>